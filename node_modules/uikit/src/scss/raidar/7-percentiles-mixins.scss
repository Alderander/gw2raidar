%borderbox {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
@for $i from 0 through 101 {
  .r-bg-#{$i} {
    @extend %borderbox;
  }
}

//Percentiles Loops

$less50: 41;
$upto100: 42;


.percentile-default {
  @for $i from 0 through 29 {
    .r-bg-#{$i} {
      background-color: percentile-color('30', 'default') !important;
      fill: percentile-color('30', 'default');
      border: $global-border-width solid darken(percentile-color('30', 'default'), 20%);
    }
  }
  @for $i from 0 to 41 {
  	.r-bg-#{$i + 29} {
  		background-color: mix(percentile-color('80', 'default'), percentile-color('30', 'default'), percentage($i / ($less50 - 1))) !important;
      fill: mix(percentile-color('80', 'default'), percentile-color('30', 'default'), percentage($i / ($less50 - 1)));
      border: $global-border-width solid darken(mix(percentile-color('80', 'default'), percentile-color('30', 'default'), percentage($i / ($less50 - 1))), 20%);
  	}
  }
  @for $i from 0 to 42 {
  	.r-bg-#{$i + 59} {
  		background-color: mix(percentile-color('99', 'default'), percentile-color('80', 'default'), percentage($i / ($upto100 - 1))) !important;
      fill: mix(percentile-color('99', 'default'), percentile-color('80', 'default'), percentage($i / ($upto100 - 1)));
      border: $global-border-width solid darken(mix(percentile-color('99', 'default'), percentile-color('80', 'default'), percentage($i / ($upto100 - 1))), 20%);
  	}
  }
}

//Item rarity colors
.percentile-rainbow {
  %trash {
    background-color: percentile-color('30', 'rainbow') !important;
    fill: percentile-color('30', 'rainbow');
    border: $global-border-width solid darken(percentile-color('30', 'rainbow'), 20%);
    text-shadow: 0 0 2px darken(percentile-color('30', 'rainbow'), 30%);
  }
  @for $i from 0 through 49 {
    .r-bg-#{$i} {
      @extend %trash;
    }
  }

  %common {
    background-color: percentile-color('50', 'rainbow') !important;
    fill: percentile-color('50', 'rainbow');
    border: $global-border-width solid darken(percentile-color('50', 'rainbow'), 20%);
    text-shadow: 0 0 2px darken(percentile-color('50', 'rainbow'), 30%);
  }
  @for $i from 50 through 59 {
    .r-bg-#{$i} {
      @extend %common;
    }
  }

  %uncommon {
    background-color: percentile-color('60', 'rainbow') !important;
    fill: percentile-color('60', 'rainbow');
    border: $global-border-width solid darken(percentile-color('60', 'rainbow'), 10%);
    color: white !important;
  }
  @for $i from 60 through 69 {
    .r-bg-#{$i} {
      @extend %uncommon;
    }
  }

  %rare {
    background-color: percentile-color('70', 'rainbow') !important;
    fill: percentile-color('70', 'rainbow');
    color: darken(percentile-color('70', 'rainbow'), 40%) !important;
    border: $global-border-width solid darken(percentile-color('70', 'rainbow'), 20%);
  }
  @for $i from 70 through 79 {
    .r-bg-#{$i} {
      @extend %rare;
    }
  }

  %exotic {
    background-color: percentile-color('80', 'default') !important;
    fill: percentile-color('80', 'default');
    border: $global-border-width solid darken(percentile-color('80', 'default'), 20%);
  }
  @for $i from 80 through 89 {
    .r-bg-#{$i} {
      @extend %exotic;
    }
  }

  %ascended {
    background-color: percentile-color('90', 'rainbow') !important;
    fill: percentile-color('90', 'rainbow');
    border: $global-border-width solid darken(percentile-color('90', 'rainbow'), 20%);
  }
  @for $i from 90 through 98 {
    .r-bg-#{$i} {
      @extend %ascended;
    }
  }

  %legnedary {
    background-color: percentile-color('99', 'default') !important;
    fill: percentile-color('99', 'default');
    border: $global-border-width solid darken(percentile-color('99', 'default'), 20%);
  }
  @for $i from 99 through 100 {
    .r-bg-#{$i} {
      @extend %legnedary;
    }
  }
}

//Colorblind Percentiles Loops

$cbless50: 41;
$cbupto100: 42;


.percentile-colorblind {
  @for $i from 0 through 29 {
    .r-bg-#{$i} {
      background-color: percentile-color('30', 'colorblind') !important;
      fill: percentile-color('30', 'colorblind');
      border: $global-border-width solid darken(percentile-color('30', 'colorblind'), 20%);
    }
  }
  @for $i from 0 to 41 {
  	.r-bg-#{$i + 29} {
  		background-color: mix(percentile-color('80', 'colorblind'), percentile-color('30', 'colorblind'), percentage($i / ($cbless50 - 1))) !important;
      fill: mix(percentile-color('80', 'colorblind'), percentile-color('30', 'colorblind'), percentage($i / ($cbless50 - 1)));
      border: $global-border-width solid darken(mix(percentile-color('80', 'colorblind'), percentile-color('30', 'colorblind'), percentage($i / ($cbless50 - 1))), 20%);
  	}
  }
  @for $i from 0 to 42 {
  	.r-bg-#{$i + 59} {
  		background-color: mix(percentile-color('99', 'colorblind'), percentile-color('80', 'colorblind'), percentage($i / ($cbupto100 - 1))) !important;
      fill: mix(percentile-color('99', 'colorblind'), percentile-color('80', 'colorblind'), percentage($i / ($cbupto100 - 1)));
      border: $global-border-width solid darken(mix(percentile-color('99', 'colorblind'), percentile-color('80', 'colorblind'), percentage($i / ($cbupto100 - 1))), 20%);
  	}
  }
  @for $i from 80 to 101 {
    .r-bg-#{$i} {
  		color: $global-background !important;
  	}
  }
}

.r-bg-101 {
  background-color: rgba($global-color, .6) !important;
  fill: rgba($global-color, .6);
  color: $global-background !important;
}
