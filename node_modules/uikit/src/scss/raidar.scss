@import url('https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:300,400,400i,700');

// To do:
// Dropdown/selection field hover/select states
// Graph styling options? Functions? How do they work?
// More complex tooltip option?

// 1. Your custom variables and variable overwrites.
$global-font-family: 'Source Sans Pro', sans-serif;
$global-secondary-font-family: "Source Code Pro", monospace;

$global-xxlarge-font-size:                       3.157em;
$global-xlarge-font-size:                        2.369em;
$global-large-font-size:                         1.777em;
$global-medium-font-size:                        1.333em;
$global-small-font-size:                         0.75em;
$global-xsmall-font-size:                        0.563em;

//
// Colors
//

$global-color:                                   #FCF1E2; // Off White
$global-emphasis-color:                          #E7CCA9; // Dusky Yellow
$global-muted-color:                             #958cbb; // Lighter Gray/purple
$global-accent-color:                            #461530; // Maroon

$global-link-color:                              $global-emphasis-color;
$global-link-hover-color:                        lighten($global-emphasis-color, 20%);

$global-inverse-color:                          #FCF1E2;

//
// Percentiles
//

$legendary-color:                                       #9C0AFF;
$ascended-color:                                       #BF326D;
$exotic-color:                                       #CF890F;
$rare-color:                                       #EAC10B;
$uncommon-color:                                       #278718;
$common-color:                                       #2D81C6;
$trash-color:                                       #705E72;

//
// Backgrounds
//

$global-background:                              #1F1C2C;

$global-muted-background:                        #3D3852;
$global-primary-background:                      #832759;
$global-secondary-background:                    #461530;

$global-success-background:                      #278718 !default;
$global-warning-background:                      #CF890F !default;
$global-danger-background:                       #BF3F47 !default;

//
// Borders
//

$global-border:                                  #D6A568;
$global-border-width:                            1px;
$heading-line-border:                         $global-muted-color;
$global-border-radius:                           3px;
//
// Spacings
//

// Used in margin, section, list
$global-margin:                                  16px;
$global-small-margin:                            8px;
$global-medium-margin:                           24px;
$global-large-margin:                            32px;
$global-xlarge-margin:                           40px;

// Used in grid, column, container, align, card, padding
$global-gutter:                                  24px;
$global-smallest-gutter:                         8px;
$global-small-gutter:                            16px;
$global-medium-gutter:                           40px;
$global-large-gutter:                            72px;


// Form Options
$form-border-width:                              1px;
$form-border:                                    $global-muted-color;
$form-focus-border:                              $global-color!default;
$form-disabled-border:                           $global-border !default;
$form-danger-border:                             $global-danger-background !default;
$form-success-border:                            $global-success-background !default;

// Table Options
$table-header-cell-font-weight:                  400;
$table-striped-row-background:                    darken($global-muted-background, 5%);

// Tooltip & Dropdown options
$tooltip-max-width:                              450px;
$tooltip-font-size:                              auto;

$dropdown-padding:                               $global-margin;
$dropdown-background:                            $global-muted-background;
$dropdown-color:                                 $global-color;
$dropdown-nav-item-color:                        $global-color;
$dropdown-nav-item-hover-color:                  darken($global-color, 10%);
$dropdown-nav-header-color:                      $global-emphasis-color !default;

// Badge Options
$badge-border-radius:                            $global-border-radius;

// Navigation
$navbar-nav-item-height:                         $global-medium-gutter*1.5;
$navbar-nav-item-padding-horizontal:             $global-gutter;
$navbar-nav-item-color:                          $global-color;
$navbar-nav-item-font-family:                    $global-font-family;
$navbar-nav-item-hover-color:                    $global-emphasis-color;
$navbar-nav-item-onclick-color:                  $global-emphasis-color;
$navbar-nav-item-active-color:                   $global-emphasis-color;

//Modal
$modal-dialog-background:                        $global-color;

// 2. Import default variables and available mixins.
@import "variables.scss";
@import "mixins.scss";

// 3. Your custom mixin overwrites.

// Typography
// Headings
// ========================================================================

@mixin hook-base-heading(){
  font-weight: 900;
}

@mixin hook-base-h1(){}

@mixin hook-base-h2(){
  font-weight: 200;
}

@mixin hook-base-h3(){}

@mixin hook-base-h4(){
  letter-spacing: 1px;
}

@mixin hook-base-h5(){
}

@mixin hook-base-h6(){
  letter-spacing: 1px;
}
.uk-font-family-primary {
  font-family: "Source Sans Pro", Helvetica, sans-serif;
}
.uk-font-family-secondary {
  font-family: "Source Code Pro", monospace;
}
.uk-text-regular {
  font-weight: 400;
}
.uk-text-light {
  font-weight: 200;
}
// Buttons
@mixin hook-button(){
  background-color: transparent;
  border: 2px solid $global-muted-background;
  padding: 0 16px;
  border-radius: $global-border-radius;
}
@mixin hook-button-hover(){
  background-color: $global-accent-color;
  border: 2px solid $global-link-color;
}
@mixin hook-button-active(){
  background-color: $global-muted-background;
  border: 2px solid $global-link-color;
}
@mixin hook-button-focus(){
  background-color: $global-muted-background;
  border: 2px solid $global-link-color;
}
@mixin hook-button-primary(){
  background-color: $global-muted-background;
  border: 2px solid $global-link-color;
}
@mixin hook-button-text(){
  border-color: transparent;
}
@mixin hook-button-text-hover(){
  border-color: transparent;
  color: $global-color;
  background-color: transparent;
}

.custom-header {
  background-repeat:no-repeat;
  background-image: url('../img/background/header-concept.jpg');
  background-color:  rgba( $global-secondary-background, .9 );
  background-blend-mode: multiply;
  background-size: 100% auto;
  background-position: top;
  background-attachment: fixed;
  @media (max-width: $breakpoint-medium) {
    background-size: auto;
  }
}


@mixin hook-tooltip(){
  border: 1px solid $global-color;
  background-color: $global-muted-background;
  @supports (backdrop-filter:blur()) or (-webkit-backdrop-filter:blur()){
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    background-color: rgba( $global-muted-background, .7 );
  }
}
.r-tooltip-help {
  cursor: help;
}


@mixin hook-dropdown() {
  border: 1px solid $global-color;
  @supports (backdrop-filter:blur()) or (-webkit-backdrop-filter:blur()){
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    background-color: rgba( $global-muted-background, .7 );
  }
}

@mixin hook-navbar() {
  li>a {
    white-space: nowrap;
  }
  .r-navbar-hover li {
    position: relative;
    z-index: 5;
    overflow: hidden;
    ::before {
      content: "";
      width: 20px;
      height: 20px;
      background: $global-background;
      position: absolute;
      top:100%;
      left:50%;
      transform: translate(-50%, -50%) rotate(45deg) scale(0);
      z-index: -1;
      transition: transform 200ms ease-in-out;
    }
    &.uk-active {
      ::before{
        transform: translate(-50%, -50%) rotate(45deg) scale(1);
      }
    }
    &:hover {
      ::before{
        transform: translate(-50%, -50%) rotate(45deg) scale(0.8);
      }
    }
  }
}

// Forms
@mixin hook-form() {
  border: $global-border-width solid $form-border;
  &:focus {
    border-color: $global-emphasis-color;
  }
  &:disabled {
    cursor: not-allowed;
  }
}

@mixin hook-form-danger() {
  border-color: $global-danger-background;
  background: $global-muted-background url('https://icongr.am/material/alert-circle-outline.svg?size=20&color=BF3F47') no-repeat scroll 95% 10px;
  &:focus {
    border-color: lighten($global-danger-background, 30%);
  }
}
@mixin hook-form-success() {
  border-color: $global-success-background;
  background: $global-muted-background url('https://icongr.am/material/check-circle-outline.svg?size=20&color=278718') no-repeat scroll 95% 10px;
  &:focus {
    border-color: lighten($global-success-background, 30%);
  }
}

// Icons
.material-icons {
  vertical-align: middle;
}

.r-media {
  display: grid;
  grid-template-columns: max-content 1fr;
  grid-gap: $global-small-gutter;
}

//tabs
@mixin hook-tab-item() {
  border-bottom: 2px solid transparent;
}
@mixin hook-tab() {
  .uk-active a {
    border-color: $global-color;
  }
}
.r-percentile-label {
  opacity: 0.5;
  cursor: pointer;
}
input.r-percentile-checkbox {
  display: none;
}
.r-percentile-checkbox:checked + .r-percentile-label {
  cursor: not-allowed;
  opacity: 1;
}


// Tables
@mixin hook-table {
  background: $global-muted-background;
}
@mixin hook-table-header-cell() {
  font-family: $global-secondary-font-family;
  font-size: $form-small-font-size;
  text-transform: uppercase;
  background: $global-background;
}

// Graphs
svg:not(:root).chart {
  overflow: visible;
}
rect.chart {
  animation: grow 600ms 1 200ms ease-out;
  animation-fill-mode: forwards;
  transform-origin: left;
  transform: scaleX(0);
}
.chart text {
  animation: visible 300ms 1 600ms ease-out;
  animation-fill-mode: forwards;
  opacity: 0;
}
@keyframes grow {
  from {transform: scaleX(0); }
  to { transform: scaleX(1); }
}
@keyframes visible {
  from {opacity: 0;}
  to { opacity: 1;}
}

.chart-hover{
  cursor: help;
  &:hover {
    outline: 1px solid #FDF8EF;
  }
}
.r-encounter-stats-container,
.r-global-stats-container {
  .r-stats-row {
    display: grid;
    grid-gap: $global-small-gutter;
    background: $global-muted-background;
    padding: $global-small-margin*1.5;
    margin-bottom: $global-small-margin;
    border-radius: $badge-border-radius;
    align-items: center;
    transition: all 150ms ease-in-out;
    &.r-member:hover:not(.r-stats-header) {
      background: lighten($global-muted-background, 5%);
    }
  }
  .r-stats-header {
    font-size: $global-small-font-size;
    font-family: $global-secondary-font-family;
    text-transform: uppercase;
    background: transparent;
    min-height: auto;
    .r-buff-toggle {
      a {
        color: $global-muted-color;
        &.uk-active {
          color: $global-color;
        }
      }
    }
  }
  &.uk-sticky-fixed {
    .r-stats-header {
      padding-top: $global-margin;
      font-size: $global-small-font-size;
    }
  }
}
.r-buff-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-gap: $global-smallest-gutter;
}
@media (min-width: $breakpoint-small) {
  .r-buff-container {
    grid-template-columns: repeat(5, 1fr);
    grid-gap: $global-small-gutter;
  }
}
.r-buff {
  display: grid;
  grid-template-columns: minmax(20px, max-content) repeat(3, minmax(max-content, 44px));
  grid-gap: 4px;
  max-height: 20px;
  .r-buff-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-size: $global-small-font-size;
  }
  .r-buff-number {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 0.8em;
    font-weight: 700;
    padding: 0 2px;
    border-radius: $badge-border-radius;
  }
}
.r-duration {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 4px;
  .r-duration-item{
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: $global-small-font-size;
    font-weight: 700;
    padding: 0 2px;
    border-radius: $badge-border-radius;
    max-height: 20px;
  }

}

// Graphs - ENCOUNTERS
.r-encounter-stats-container {
  opacity: 0;
  animation-name: uk-fade-bottom-small;
  animation-timing-function: ease-out;
  animation-fill-mode: both;
  animation-iteration-count: 1;
  animation-duration: 60ms;
  .r-stats-row {
    padding: $global-small-margin;
    margin-bottom: $global-small-margin/2;
    @media (max-width: $breakpoint-large) {
      padding: $global-margin
    }
    &.r-buff-stats {
      display: grid;
      grid-template-columns: 160px repeat(auto-fit, minmax(100px, 1fr));
      grid-template-rows: 2fr;
      grid-gap: $global-small-margin;
    }
    &.r-party {
      background-color: darken($global-muted-background, 8%)
    }
    &.r-member {
      margin-left: 6px;
      position: relative;
      @media (max-width: $breakpoint-small) {
        margin-left: 0;
      }
      &:after {
        content: "";
        width: 4px;
        background-color: darken($uncommon-color,10%);
        position: absolute;
        left:0;
        top:0;
        border-radius: 3px 0 0 3px;
      }
      &:before {
        content: "";
        width: 4px;
        background-color: $global-danger-background;
        position: absolute;
        left:0;
        top:0;
        border-radius: 3px 0 0 3px;
        height: 100%;
      }
    }
    @media (max-width: $breakpoint-small) {
        &.r-stats-header {
          grid-template-columns: 1fr 1fr;
        }
    }
  }

  .r-encounter-player {
    display: grid;
    align-items: center;
    grid-template-columns: 1fr 36px;
    grid-gap: $global-smallest-gutter;
    @media (max-width: $breakpoint-small) {
      grid-template-columns: 1fr 36px !important;
    }
    .r-encounter-player-image {
      position: relative;
      .r-encounter-player-archetype {
        padding: 3px;
        border-radius: 50%;
        background: #1f1c2d;
        position: absolute;
        right: -8px;
        bottom: -8px;
        width: 20px;
      }
    }
  }
  //Tablet medium size
  @media (max-width: $breakpoint-large) {
    .r-stats-row {
      grid-template-columns: 1fr 2fr;
    }
    .r-encounter-player {
      grid-template-columns: max-content 36px;
    }
    .r-encounter-damage.in{
      grid-column: span 1;
    }
    .r-stats-buffs .r-encounter-buff-container {
      grid-column: span 2;
    }
  }
  // Phone size
  @media (max-width: $breakpoint-small) {
    .r-stats-row {
      grid-template-columns: 1fr;
    }
    .r-encounter-player,
    .r-encounter-damage,
    .r-encounter-damage.in{
      grid-column: auto;
    }
    .compare {
      display: none;
    }
  }
  // Desktop and Larger
  @media (min-width: $breakpoint-large) {
    .r-stats-row {
      display: grid;
      grid-template-columns: 160px minmax(300px, 3fr) 1fr minmax(max-content, 3fr) 60px;
      grid-gap: $global-small-gutter;
      &:hover .compare {
        opacity: 1;
      }
    }
    .r-stats-row.r-stats-buffs {
      display: grid;
      grid-template-columns: 160px 1fr;
      grid-gap: $global-small-gutter;
    }
    .compare {
      opacity: 0;
      transition: opacity 150ms ease-in-out 100ms;
    }
  }
  .r-encounter-buff-container {
    margin: 0;
    padding: 0;
    list-style: none;
    &, .r-buff-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(max-content, 68px));
      grid-column-gap: $global-small-gutter;
    }
  }
  .r-encounter-buff{
      display: grid;
      grid-template-rows: repeat(2, 20px);
      @media (max-width: $breakpoint-small) {
        grid-template-rows: 20px;
      }
      grid-template-columns: 20px 1fr;
      grid-gap: 4px;
      align-items: flex-start;
      margin-top: $global-small-gutter;
      img {
        grid-row: span 2;
      }
      .r-buff-number {
        text-align: center;
        align-self: center;
        font-size: 0.8em;
        font-weight: 700;
        padding: 0 2px;
        border-radius: $badge-border-radius;
        max-height: 24px;
        &:first-child {
          padding: 0 4px;
          font-size: $global-font-size
        }
      }
  }
  .r-encounter-misc {
    .uk-badge {
      cursor: help;
    }
  }
  &.r-encounter-mechanics-container .r-stats-row {
    grid-template-columns: 160px repeat(auto-fit, minmax(60px, 1fr));
    grid-template-rows: 1fr;
    text-align: center;
    &:not(.r-stats-header) {
      min-height: 60px;
    }
  }
  .r-mechanics-list {
    align-self: center;
  }
}
@for $i from 1 through 15{
  .r-encounter-stats-container:nth-of-type(#{$i}){
    animation-delay: $i * 40ms !important;
  }
}
// Graphs - GLOBAL STATS
.r-global-stats-container {
  .r-stats-row {
    grid-template: "spec spec" max-content
                    "damage damage" max-content
                   "buffs  buffs" max-content
                   / 160px 1fr;
    padding: $global-small-gutter/4 $global-small-gutter/2;
    .r-spec {
      grid-area: spec;
      display:grid;
      grid-template-columns: 1fr 36px;
      grid-auto-flow: column;
      text-align: right;
      align-items: flex-end;
      cursor: help;
      @media (max-width: $breakpoint-small) {
        text-align: left;
      }
      .r-global-stats-indicator {
        font-size: 16px;
        line-height: 1.4;
        vertical-align: text-top;
      }
    }
    .r-global-stats-damage {
      grid-area: damage;
    }
    .r-global-stats-buffs {
      grid-area: buffs;
      align-items: center;
      h6 {
        grid-column: span 5;
        @media (max-width: $breakpoint-small) {
          grid-column: span 2;
        }
      }
    }
    .r-global-stats-popularity {
      grid-area: pop;
    }
  }
  @media (min-width: $breakpoint-large) {
    .r-stats-row {
      display: grid;
      grid-template: "spec damage buffs";
      grid-template-columns: 160px 3fr 5fr;
      grid-gap: $global-small-gutter;
    }
  }

}

.r-global-group-stats-container {
  display: grid;
  grid-auto-flow: row;
  .r-stats-row {
    display: grid;
    grid-template:  "damage damage"
                    "damagein duration";
    grid-template-columns: 1fr;
    @media (min-width: $breakpoint-large) {
        grid-template: "duration damage damagein";
        grid-template-columns: 1fr 4fr 2fr;
        grid-gap: $global-small-gutter;
      }
    .r-global-stats-damageIn {
      grid-area: damagein;
    }
  }
}


// Encounters List
.encounters {
  background-color: $global-background !important;
}
.r-encounters-list {
  display: table-row;
  border-bottom: 4px solid $global-background;
  transition: background-color 150ms ease-in-out;
  opacity: 0;
  background-color: $global-muted-background;
  animation-name: uk-fade-bottom-small;
  animation-timing-function: ease-out;
  animation-fill-mode: both;
  animation-iteration-count: 1;
  animation-duration: 60ms;
  &:hover {
    background-color: darken($global-muted-background, 5%);
    text-decoration: none;
  }
  @media (max-width: $breakpoint-medium) {
    display: block;
  }
}
@for $i from 1 through 15{
  .r-encounters-list:nth-child(#{$i}){
    animation-delay: $i * 20ms !important;
  }
}

// Profile/Personal Stats
.r-profile-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: $global-small-gutter;
  padding: $global-smallest-gutter;
  border-radius: $global-border-radius;
  background: $global-muted-background;
  margin-bottom: $global-medium-gutter !important;
  .r-profile-profession {
    display: grid;
    grid-column: span 3;
    grid-template-columns: 38px 1fr ;
    align-items: center;
    grid-gap: $global-smallest-gutter;
  }
  .r-profile-damage {
    grid-column: span 4;
  }
}


//Labels
@for $i from 0 through 49 {
  .r-bg-#{$i} {
    background-color: $trash-color !important;
    fill: $trash-color;
  }
}
@for $i from 50 through 59 {
  .r-bg-#{$i} {
    background-color: $common-color !important;
    fill: $common-color;
  }
}
@for $i from 60 through 69 {
  .r-bg-#{$i} {
    background-color: $uncommon-color !important;
    fill: $uncommon-color;
  }
}
@for $i from 70 through 79 {
  .r-bg-#{$i} {
    background-color: $rare-color !important;
    fill: $rare-color;
    text-shadow: 0 0 2px darken($rare-color, 30%);
  }
}
@for $i from 80 through 89 {
  .r-bg-#{$i} {
    background-color: $exotic-color !important;
    fill: $exotic-color;
  }
}
@for $i from 90 through 98 {
  .r-bg-#{$i} {
    background-color: $ascended-color !important;
    fill: $ascended-color;
  }
}
@for $i from 99 through 100 {
  .r-bg-#{$i} {
    background-color: $legendary-color !important;
    fill: $legendary-color;
  }
}
.r-bg-101 {
  background-color: rgba($global-color, .75) !important;
  fill: rgba($global-color, .75);
  color: $global-background !important;
}

@for $i from 0 through 100 {
  .r-member.activity-#{$i}:after {
    height: percentage($i)/100;
  }
}

//Tags fixes
.tags-input input {
  max-width: 270px;
}

//Fun Loader
.r-loading-container {
  height: calc(100vh - 150px);
  display: flex;
  align-items: center;
  animation: fadeIn 200ms 1 ease-in;
}
@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}
#Legendary1 {
  animation: colorChange 3s infinite ease-in-out;
}
@keyframes colorChange {
  from { fill:#7B09C9;}
  33% { fill: #2D81C6;}
  66% { fill:#278718;}
  to { fill: #7B09C9;}
}

#eternity0_fill {
  animation: movement 10s infinite ease-in-out alternate;
}
@keyframes movement {
  from { transform: translate(-50px, 20px);}
  to {transform: translate(50px, -20px);}
}


// 4. Import UIkit.
@import "uikit-theme.scss";
