{% load staticfiles %}
<table class="uk-table uk-table-striped">
  <thead>
    <tr>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="area:up">
        Area
        [[#if encounterSort.prop != 'area']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
      </th>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="started_at:down">
        Time
        [[#if encounterSort.prop != 'started_at']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
      </th>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="duration:down">
        Duration
        [[#if encounterSort.prop != 'duration']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
      </th>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="character:up">
        Character
        [[#if encounterSort.prop != 'character']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
      </th>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="account:up">
        Account
        [[#if encounterSort.prop != 'account']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
      </th>
      <th class="uk-width-auto" on-click="sort_encounters" data-sort="uploaded_at:down">
        Upload
        [[#if encounterSort.prop != 'uploaded_at']]
          <span uk-icon="icon: minus"></span>
        [[elseif encounterSort.dir == 'up']]
          <span uk-icon="icon: chevron-up"></span>
        [[else]]
          <span uk-icon="icon: chevron-down"></span>
        [[/if]]
        <div class="uk-float-right" on-click="encounter_filter_toggle">
          [[#if encounterSort.filters]]
            <span uk-icon="icon: minus-circle"></span>
          [[else]]
            <span uk-icon="icon: plus-circle"></span>
          [[/if]]
        </div>
      </th>
    </tr>
    [[#if encounterSort.filters]]
      <tr>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.area]]" placeholder="Starts with">
        </th>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.started_from]]" placeholder="From"><br>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.started_till]]" placeholder="Till">
        </th>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.duration_from]]" placeholder="From"><br>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.duration_till]]" placeholder="Till">
        </th>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.character]]" placeholder="Starts with">
        </th>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.account]]" placeholder="Starts with">
        </th>
        <th>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.uploaded_from]]" placeholder="From"><br>
          <input class="uk-input uk-form-small" value="[[encounterSort.filter.uploaded_till]]" placeholder="Till">
        </th>
      </tr>
    [[/if]]
  </thead>
  [[#each encounterSlice]]
    <tr on-click="@this.page({ name: 'encounter', no: id })">
      <td>
        [[area]]
      </td>
      <td>
        [[formatDate(started_at)]]
      </td>
      <td>
        &#91;[[formatTime(duration)]]&#93;
      </td>
      <td>
        <img alt="[[data.archetypes[archetype]]]" src="{% static 'raidar/img/arch/' %}/[[data.archetypes[archetype]]].png"/>
        <img alt="[[data.specialisations[profession][elite]]]" src="{% static 'raidar/img/20px/' %}/[[data.specialisations[profession][elite]]]_tango_icon_20px.png"/>
        [[character]]
      </td>
      <td>
        [[account]]
      </td>
      <td>
        [[formatDate(uploaded_at)]]
      </td>
    </tr>
  [[/each]]
</table>

<hr class="uk-divider-icon">
<ul class="uk-pagination uk-flex-center">
  [[#each encounterPages]]
    [[#if a || d]]
      <li class="[[a ? 'uk-active' : 'uk-disabled']]"><span class="[[c]]">[[t]]</span></li>
    [[else]]
      <li><a href="#" class="[[c]]" data-page="[[n || t]]" on-click="page_no">[[t]]</a></li>
    [[/if]]
  [[/each]]
</ul>
